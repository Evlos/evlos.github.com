<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Generate subkey for signing commits gpg --import 9719C414F2BFB666 gpg --edit-key 9719C414F2BFB666 gpg> addkey Please select what kind of key you want: (3) DSA (sign only) (4) RSA (sign only) (5) Elgamal (encrypt only) (6) RSA (encrypt only) (10) ECC (sign only) (12) ECC (encrypt only) (14) Existing key from card Your selection? 4 gpg> save Write key to smart card gpg --card-status gpg> key 1 gpg> keytocard Delete key from current device gpg --delete-secret-keys 9719C414F2BFB666 shred -u 9719C414F2BFB666 rm 9719C414F2BFB666 FAQ: There is no assurance this key belongs to the named user gpg: 0BCEB1DF39464516: There is no assurance this key belongs to the named user gpg: /dev/shm/files."><meta property="og:title" content="GnuPG and Subkeys"><meta property="og:description" content="Generate subkey for signing commits gpg --import 9719C414F2BFB666 gpg --edit-key 9719C414F2BFB666 gpg> addkey Please select what kind of key you want: (3) DSA (sign only) (4) RSA (sign only) (5) Elgamal (encrypt only) (6) RSA (encrypt only) (10) ECC (sign only) (12) ECC (encrypt only) (14) Existing key from card Your selection? 4 gpg> save Write key to smart card gpg --card-status gpg> key 1 gpg> keytocard Delete key from current device gpg --delete-secret-keys 9719C414F2BFB666 shred -u 9719C414F2BFB666 rm 9719C414F2BFB666 FAQ: There is no assurance this key belongs to the named user gpg: 0BCEB1DF39464516: There is no assurance this key belongs to the named user gpg: /dev/shm/files."><meta property="og:type" content="article"><meta property="og:url" content="/posts/gpg_and_subkeys/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-29T00:17:29+08:00"><meta property="article:modified_time" content="2024-12-29T00:17:29+08:00"><title>GnuPG and Subkeys</title><link rel=canonical href=/posts/gpg_and_subkeys/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-66839894-6"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-66839894-6")</script><style type=text/css>pre{width:100%;overflow:hidden}img{max-width:90%}h2{color:#b3befe;text-transform:uppercase;font-family:fangsong,sans-serif}a{color:#aaa;text-decoration:none}a:hover{text-decoration:underline}li.post-item{color:#6b6f84}li.post-item .meta{font-size:85%;padding-right:2px}li.post-item a{font-family:monospace;font-size:110%;color:#b3befe}body{background-color:#333;color:#eee}pre{background-color:#272822}code{max-width:98%;text-wrap-mode:wrap}footer{color:#555}header h1{text-transform:uppercase;font-family:monospace;background:#3facfe;color:rgba(255,255,255,.8);display:inline-block;margin:2px;padding:0 8px}</style></head><body lang><section class="main post"><div class=container><div class=content><div class=front-matter><div class=title-container><h2>GnuPG and Subkeys</h2></div><div class=meta><div class=date title='Sun Dec 29 2024 00:17:29 +0800'>Dec 29, 2024</div><div class=reading-time><div class=middot></div></div></div></div><div class=markdown><h2 id=generate-subkey-for-signing-commits>Generate subkey for signing commits</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --import 9719C414F2BFB666
</span></span><span style=display:flex><span>gpg --edit-key 9719C414F2BFB666
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gpg&gt; addkey
</span></span><span style=display:flex><span>Please <span style=color:#66d9ef>select</span> what kind of key you want:
</span></span><span style=display:flex><span>   <span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> DSA <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>(</span>4<span style=color:#f92672>)</span> RSA <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>(</span>5<span style=color:#f92672>)</span> Elgamal <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>(</span>6<span style=color:#f92672>)</span> RSA <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>10<span style=color:#f92672>)</span> ECC <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> ECC <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>(</span>14<span style=color:#f92672>)</span> Existing key from card
</span></span><span style=display:flex><span>Your selection? <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>gpg&gt; save
</span></span></code></pre></div><h2 id=write-key-to-smart-card>Write key to smart card</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --card-status
</span></span><span style=display:flex><span>gpg&gt; key <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>gpg&gt; keytocard
</span></span></code></pre></div><h2 id=delete-key-from-current-device>Delete key from current device</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --delete-secret-keys 9719C414F2BFB666
</span></span><span style=display:flex><span>shred -u 9719C414F2BFB666
</span></span><span style=display:flex><span>rm 9719C414F2BFB666
</span></span></code></pre></div><h2 id=faq-there-is-no-assurance-this-key-belongs-to-the-named-user>FAQ: There is no assurance this key belongs to the named user</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg: 0BCEB1DF39464516: There is no assurance this key belongs to the named user
</span></span><span style=display:flex><span>gpg: /dev/shm/files.HLSjpzshX9PFW/mZzQeK-protected.txt: encryption failed: Unusable public key
</span></span><span style=display:flex><span>GPG encryption failed. Would you like to try again? <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gpg --edit-key 0BCEB1DF39464516
</span></span><span style=display:flex><span>gpg&gt; trust
</span></span><span style=display:flex><span>You will be asked to <span style=color:#66d9ef>select</span> the trust level from the following:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1 <span style=color:#f92672>=</span> I don<span style=color:#e6db74>&#39;t know or won&#39;</span>t say
</span></span><span style=display:flex><span>2 <span style=color:#f92672>=</span> I <span style=color:#66d9ef>do</span> NOT trust
</span></span><span style=display:flex><span>3 <span style=color:#f92672>=</span> I trust marginally
</span></span><span style=display:flex><span>4 <span style=color:#f92672>=</span> I trust fully
</span></span><span style=display:flex><span>5 <span style=color:#f92672>=</span> I trust ultimately
</span></span><span style=display:flex><span>m <span style=color:#f92672>=</span> back to the main menu
</span></span><span style=display:flex><span>I selected <span style=color:#ae81ff>5</span> since I created the key so of course I trust it ultimately :<span style=color:#f92672>)</span>. It will ask you to confirm your decision:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your decision? <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>Do you really want to set this key to ultimate trust? <span style=color:#f92672>(</span>y/N<span style=color:#f92672>)</span> y
</span></span><span style=display:flex><span>After confirming, quit with:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gpg&gt; quit
</span></span></code></pre></div><h2 id=faq-how-to-publish-key>FAQ: How to publish key</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --send-keys 9719C414F2BFB666
</span></span><span style=display:flex><span>gpg --send-keys --keyserver keyserver.ubuntu.com 9719C414F2BFB666
</span></span><span style=display:flex><span>gpg --send-keys --keyserver pgp.mit.edu 9719C414F2BFB666
</span></span><span style=display:flex><span>gpg --export 9719C414F2BFB666 | curl -T - https://keys.openpgp.org
</span></span></code></pre></div><h2 id=faq-how-to-export-key>FAQ: How to export key</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --export --armor --output 9719C414F2BFB666.pub 9719C414F2BFB666
</span></span><span style=display:flex><span>gpg --export-secret-keys --armor --output 9719C414F2BFB666 9719C414F2BFB666
</span></span></code></pre></div><br><p class=back-to-posts><a href=/>[back]</a></p></div><br></div></div></section>