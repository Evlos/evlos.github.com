<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=description content="Check system status lshw -class disk -class storage *-raid description: RAID bus controller product: MegaRAID SAS 2208 [Thunderbolt] vendor: LSI Logic / Symbios Logic physical id: 0 bus info: pci@0000:02:00.0 logical name: scsi0 version: 05 width: 64 bits clock: 33MHz capabilities: raid pm pciexpress vpd msi msix bus_master cap_list rom configuration: driver=megaraid_sas latency=0 resources: irq:50 ioport:fc00(size=256) memory:ddffc000-ddffffff memory:ddf80000-ddfbffff memory:dd000000-dd01ffff *-disk:0 description: SCSI Disk product: PERC H710 vendor: DELL physical id: 2."><meta property="og:title" content="Proxmox Disk Passthrough"><meta property="og:description" content="Check system status lshw -class disk -class storage *-raid description: RAID bus controller product: MegaRAID SAS 2208 [Thunderbolt] vendor: LSI Logic / Symbios Logic physical id: 0 bus info: pci@0000:02:00.0 logical name: scsi0 version: 05 width: 64 bits clock: 33MHz capabilities: raid pm pciexpress vpd msi msix bus_master cap_list rom configuration: driver=megaraid_sas latency=0 resources: irq:50 ioport:fc00(size=256) memory:ddffc000-ddffffff memory:ddf80000-ddfbffff memory:dd000000-dd01ffff *-disk:0 description: SCSI Disk product: PERC H710 vendor: DELL physical id: 2."><meta property="og:type" content="article"><meta property="og:url" content="/posts/proxmox-disk-passthrough/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-11T17:05:15+08:00"><meta property="article:modified_time" content="2021-03-11T17:05:15+08:00"><title>Proxmox Disk Passthrough</title><link rel=canonical href=/posts/proxmox-disk-passthrough/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-66839894-6"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-66839894-6")</script></head><body lang><section class="main post"><div class=container><div class=content><div class=front-matter><div class=title-container><h2>Proxmox Disk Passthrough</h2></div><div class=meta><div class=date title='Thu Mar 11 2021 17:05:15 +0800'>Mar 11, 2021</div><div class=reading-time><div class=middot></div></div></div></div><div class=markdown><h2 id=check-system-status>Check system status</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lshw -class disk -class storage
</span></span><span style=display:flex><span>  *-raid
</span></span><span style=display:flex><span>       description: RAID bus controller
</span></span><span style=display:flex><span>       product: MegaRAID SAS <span style=color:#ae81ff>2208</span> <span style=color:#f92672>[</span>Thunderbolt<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>       vendor: LSI Logic / Symbios Logic
</span></span><span style=display:flex><span>       physical id: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>       bus info: pci@0000:02:00.0
</span></span><span style=display:flex><span>       logical name: scsi0
</span></span><span style=display:flex><span>       version: <span style=color:#ae81ff>05</span>
</span></span><span style=display:flex><span>       width: <span style=color:#ae81ff>64</span> bits
</span></span><span style=display:flex><span>       clock: 33MHz
</span></span><span style=display:flex><span>       capabilities: raid pm pciexpress vpd msi msix bus_master cap_list rom
</span></span><span style=display:flex><span>       configuration: driver<span style=color:#f92672>=</span>megaraid_sas latency<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>       resources: irq:50 ioport:fc00<span style=color:#f92672>(</span>size<span style=color:#f92672>=</span>256<span style=color:#f92672>)</span> memory:ddffc000-ddffffff memory:ddf80000-ddfbffff memory:dd000000-dd01ffff
</span></span><span style=display:flex><span>     *-disk:0
</span></span><span style=display:flex><span>          description: SCSI Disk
</span></span><span style=display:flex><span>          product: PERC H710
</span></span><span style=display:flex><span>          vendor: DELL
</span></span><span style=display:flex><span>          physical id: 2.0.0
</span></span><span style=display:flex><span>          bus info: scsi@0:2.0.0
</span></span><span style=display:flex><span>          logical name: /dev/sda
</span></span><span style=display:flex><span>          version: 3.13
</span></span><span style=display:flex><span>          serial: 00b73ee80867ebca27005451eae03f08
</span></span><span style=display:flex><span>          size: 1862GiB <span style=color:#f92672>(</span>1999GB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>          capabilities: gpt-1.00 partitioned partitioned:gpt
</span></span><span style=display:flex><span>          configuration: ansiversion<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> guid<span style=color:#f92672>=</span>b69eb98b-48e2-4963-b0dd-45c7898622a3 logicalsectorsize<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span> sectorsize<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span>
</span></span><span style=display:flex><span>     *-disk:1
</span></span><span style=display:flex><span>          description: SCSI Disk
</span></span><span style=display:flex><span>          product: PERC H710
</span></span><span style=display:flex><span>          vendor: DELL
</span></span><span style=display:flex><span>          physical id: 2.1.0
</span></span><span style=display:flex><span>          bus info: scsi@0:2.1.0
</span></span><span style=display:flex><span>          logical name: /dev/sdb
</span></span><span style=display:flex><span>          version: 3.13
</span></span><span style=display:flex><span>          serial: 001b21140d211bcb27005451eae03f08
</span></span><span style=display:flex><span>          size: 7451GiB <span style=color:#f92672>(</span>8TB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>          configuration: ansiversion<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> logicalsectorsize<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span> sectorsize<span style=color:#f92672>=</span><span style=color:#ae81ff>512</span>
</span></span></code></pre></div><h2 id=list-disks>List disks</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /dev/disk/by-id/scsi-* -al
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>9</span> Feb <span style=color:#ae81ff>27</span> 17:54 /dev/disk/by-id/scsi-36b083fe0ea51540027caeb6708e83eb7 -&gt; ../../sda
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 17:54 /dev/disk/by-id/scsi-36b083fe0ea51540027caeb6708e83eb7-part1 -&gt; ../../sda1
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 17:54 /dev/disk/by-id/scsi-36b083fe0ea51540027caeb6708e83eb7-part2 -&gt; ../../sda2
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 17:54 /dev/disk/by-id/scsi-36b083fe0ea51540027caeb6708e83eb7-part3 -&gt; ../../sda3
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>9</span> Feb <span style=color:#ae81ff>27</span> 18:26 /dev/disk/by-id/scsi-36b083fe0ea51540027cb1b210d14211b -&gt; ../../sdb
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 18:26 /dev/disk/by-id/scsi-36b083fe0ea51540027cb1b210d14211b-part1 -&gt; ../../sdb1
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 18:26 /dev/disk/by-id/scsi-36b083fe0ea51540027cb1b210d14211b-part2 -&gt; ../../sdb2
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>10</span> Feb <span style=color:#ae81ff>27</span> 18:26 /dev/disk/by-id/scsi-36b083fe0ea51540027cb1b210d14211b-part3 -&gt; ../../sdb3
</span></span><span style=display:flex><span>lrwxrwxrwx <span style=color:#ae81ff>1</span> root root  <span style=color:#ae81ff>9</span> Feb <span style=color:#ae81ff>27</span> 17:54 /dev/disk/by-id/scsi-36b083fe0ea51540027ccd1e20d81e6fc -&gt; ../../sdc
</span></span></code></pre></div><h2 id=example>Example</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qm set <span style=color:#ae81ff>100</span> -sata3 /dev/disk/by-id/scsi-36b083fe0ea51540027ccd1e20d81e6fc
</span></span></code></pre></div><p>The maximum amount of SATAs is 6 (sata0 ~ sata5), therefore the seventh disk must be set as IDE.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>qm set <span style=color:#ae81ff>100</span> -ide0 /dev/disk/by-id/scsi-36b083fe0ea51540027cd5eba0da6d270
</span></span></code></pre></div><br><p class=back-to-posts><a href=/>[back]</a></p></div><br></div></div></section>